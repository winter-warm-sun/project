<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新闻详情</title>

    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/news_content.css">
    <link rel="stylesheet" href="editor.md/css/editormd.preview.min.css" />
    <script src="js/jquery.min.js"></script>
    <script src="editor.md/editormd.js"></script>
    <script src="editor.md/lib/marked.min.js"></script>
    <script src="editor.md/lib/prettify.min.js"></script>
    <script src="js/tools.js"></script>
</head>

<body>
<!-- 导航栏 -->
<div class="nav">
    <img src="img/logo.jpg" alt="">
    <span class="title">影视助手</span>
    <!-- 用来占据中间位置 -->
    <span class="spacer"></span>
    <div class="dropdown">
        <span>影片管理</span>
        <div class="dropdown-menu">
            <a href="movie_list.html">影片展示</a>
            <a href="upload_movie.html">电影上传</a>
            <a href="category_manage.html">类别管理</a>
        </div>
    </div>
    <div class="dropdown">
        <span>新闻管理</span>
        <div class="dropdown-menu">
            <a href="news_list.html">新闻浏览</a>
            <a href="news_publish.html">新闻发布</a>
        </div>
    </div>
    <a href="javascript:onExit()">注销</a>
</div>

<!-- 版心 -->
<div class="container">
    <div class="news-content">
        <h3 id="title"></h3>
        <div class="date"></div>
        <div id="editorDiv">

        </div>
    </div>

</div>
</body>

<script type="text/javascript">
    var nid=getURLParam("newsId");
    // 获取新闻详情
    function getNewsDetail() {
        // 从url中获取新闻id
        if(nid!=null&&nid>0) {
            // 访问后端查询新闻详情
            jQuery.ajax({
                url:"/news/detailbyid",
                type:"POST",
                data:{"nid":nid},
                success:function (body) {
                    if(body.code==200&&body.data!=null) {
                        let art=body.data;
                        jQuery('#title').text(art.title);
                        jQuery('.date').text(art.releasetime);
                        editormd = editormd.markdownToHTML("editorDiv", {
                            markdown : art.content
                        });
                    }
                }
            });
        }
    }
    getNewsDetail();
</script>
</html>